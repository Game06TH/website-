{% extends "base.html" %}
{% block content %}
<div class="container py-4">
  <h2 class="text-center mb-5">
    üõí <strong>‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</strong>
  </h2>

  {% if products %}
    <div class="table-responsive shadow-sm">
      <table class="table table-hover align-middle border rounded-3 overflow-hidden">
        <thead class="table-light">
          <tr class="text-center">
            <th>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
            <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
            <th>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢</th>
            <th>‡∏£‡∏ß‡∏°</th>
            <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
          </tr>
        </thead>
        <tbody>
          {% for product in products %}
          <tr class="text-center align-middle">
            <td class="text-start fw-semibold">{{ product.name }}</td>
            <td>
              <form method="post" action="{{ url_for('update_cart', product_id=product.id) }}" class="d-flex justify-content-center align-items-center gap-2">
                <input type="number" name="quantity" value="{{ product.quantity }}" min="1" class="form-control form-control-sm text-center" style="width: 60px;">
                <button class="btn btn-sm btn-outline-primary" type="submit">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï</button>
              </form>
            </td>
            <td class="text-end">{{ product.price | float | round(2) }} ‡∏ö‡∏≤‡∏ó</td>
            <td class="text-end">{{ product.subtotal | float | round(2) }} ‡∏ö‡∏≤‡∏ó</td>
            <td>
              <form method="post" action="{{ url_for('update_cart', product_id=product.id) }}">
                <input type="hidden" name="quantity" value="0">
                <button class="btn btn-sm btn-outline-danger" type="submit">‡∏•‡∏ö</button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
        <tfoot>
          <tr>
            <td colspan="3" class="text-end fw-bold text-uppercase">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:</td>
            <td colspan="2" class="text-end fw-bold text-success">{{ total | float | round(2) }} ‡∏ö‡∏≤‡∏ó</td>
          </tr>
        </tfoot>
      </table>
    </div>

    <div class="d-flex justify-content-between mt-4">
      <a href="{{ url_for('clear_cart') }}" class="btn btn-warning btn-lg px-4">
        üßπ ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
      </a>
      <a href="{{ url_for('checkout') }}" class="btn btn-success btn-lg px-4">
        ‚úÖ ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠
      </a>
    </div>
  {% else %}
    <p class="text-center text-muted mt-5">üõçÔ∏è <em>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</em></p>
  {% endif %}
</div>
{% endblock %}
