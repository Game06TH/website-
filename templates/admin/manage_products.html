{% extends "base.html" %}
{% block content %}
<div class="container mt-5">
  <h3 class="heading-title">üõ†Ô∏è ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>

<!-- ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
<form method="post" action="{{ url_for('admin_add_product') }}" enctype="multipart/form-data" class="product-form">
  <div class="row g-2 align-items-end">
    <div class="col-md">
      <label class="form-label">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
      <input type="text" name="name" class="form-control" required>
    </div>
    <div class="col-md">
      <label class="form-label">‡∏£‡∏≤‡∏Ñ‡∏≤</label>
      <input type="number" name="price" class="form-control" required>
    </div>
    <div class="col-md">
      <label class="form-label">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
      <input type="text" name="category" class="form-control">
    </div>
    <div class="col-md">
      <label class="form-label">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</label>
      <input type="text" name="description" class="form-control">
    </div>
    <div class="col-md">
      <label class="form-label">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</label>
      <input type="file" name="image" class="form-control">
    </div>
    <div class="col-md-auto">
      <button type="submit" class="btn btn-primary px-4">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
    </div>
  </div>
</form>


  <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
  <div class="table-responsive product-table">
    <table class="table table-bordered align-middle text-center">
      <thead class="table-dark">
        <tr>
          <th>‡∏ä‡∏∑‡πà‡∏≠</th>
          <th>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</th>
          <th>‡∏£‡∏≤‡∏Ñ‡∏≤</th>
          <th>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</th>
          <th>‡∏£‡∏π‡∏õ</th>
          <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
        </tr>
      </thead>
        <tbody>
          {% for p in products %}
          <tr>
            <form method="post" enctype="multipart/form-data" action="{{ url_for('admin_update_product', product_id=p.id) }}">
              <td><input name="name" value="{{ p.name }}" class="form-control"></td>
              <td><input name="description" value="{{ p.description }}" class="form-control"></td>
              <td><input name="price" value="{{ p.price }}" class="form-control"></td>
              <td><input name="category" value="{{ p.category }}" class="form-control"></td>
              <td>
                {% if p.image %}
                  <img src="{{ url_for('static', filename='images/' ~ p.image) }}" alt="product" class="product-image mb-2">
                {% else %}
                  <span class="text-muted">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ</span>
                {% endif %}
                <input type="file" name="image" class="form-control mt-1">
                <input type="hidden" name="old_image" value="{{ p.image }}">
              </td>
              <td>
                <div class="action-buttons d-flex flex-column gap-1">
                  <button type="submit" class="btn btn-warning btn-sm">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
            </form> <!-- ‡∏õ‡∏¥‡∏î‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->

            <form method="post" action="{{ url_for('admin_delete_product', product_id=p.id) }}">
              <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏ö?')">‡∏•‡∏ö</button>
            </form>
                </div>
              </td>
          </tr>
          {% endfor %}
        </tbody>
    </table>
  </div>
</div>
{% endblock %}
